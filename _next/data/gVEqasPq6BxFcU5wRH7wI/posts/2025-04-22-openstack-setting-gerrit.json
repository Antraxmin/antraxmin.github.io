{"pageProps":{"postData":{"id":"2025-04-22-openstack-setting-gerrit","contentHtml":"<h2 id=\"gerrit\">Gerrit이란?</h2>\n<p>Gerrit은 Git 기반의 코드 리뷰 시스템으로, OpenStack 커뮤니티에서 코드 변경사항을 검토하고 병합하는 데 사용된다. OpenStack에 코드를 기여하기 위해서는 반드시 Gerrit을 사용해야만 한다.</p>\n<p>기여 과정은 대략 아래와 같다.</p>\n<ol>\n<li>코드 변경 작성</li>\n<li>Gerrit에 변경사항 제출</li>\n<li>자동화된 CI 테스트 통과</li>\n<li>커뮤니티 구성원의 코드 리뷰</li>\n<li>필요한 경우 코드 수정</li>\n<li>최종 승인 및 병합</li>\n</ol>\n<p>OpenStack에 기여하기 위해서는 Gerrit 계정과 더불어 Storyboard(이슈 트래킹 시스템)에 접근할 수 있어야 한다. 두 시스템 모두 Ubuntu One 계정을 통해 통합 관리된다.</p>\n<h2 id=\"ubuntu-one\">Ubuntu One 계정 생성</h2>\n<p>시작하기 전에 Ubuntu One 계정이 필요하다. 이 계정은 Gerrit, Storyboard 등 OpenStack 관련 서비스에 모두 사용된다.\n<img src=\"https://velog.velcdn.com/images/antraxmin/post/a47181b7-569f-4d8d-98bd-61a8918b58a9/image.png\" alt=\"\"></p>\n<h2 id=\"gerrit\">Gerrit 계정 생성</h2>\n<p>Ubuntu One 계정을 생성한 후 Gerrit 계정을 설정할 수 있다.</p>\n<p><img src=\"https://velog.velcdn.com/images/antraxmin/post/1874b818-0813-449c-a352-96f24841f62f/image.png\" alt=\"\"></p>\n<blockquote>\n<p>Gerrit 사용자 이름은 이후 Git 구성에 필요하므로 반드시 기록해 두자.</p>\n</blockquote>\n<h2 id=\"ssh\">SSH 키 생성 및 등록</h2>\n<p>Gerrit과 안전하게 통신하려면 SSH 키 쌍이 필요하다.</p>\n<h3 id=\"1-ssh\">1) SSH 키 생성</h3>\n<p>터미널을 열고 다음 명령어를 실행한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">ssh-keygen <span class=\"token parameter variable\">-t</span> rsa <span class=\"token parameter variable\">-b</span> <span class=\"token number\">4096</span> <span class=\"token parameter variable\">-C</span> <span class=\"token string\">\"이메일 주소\"</span>\n</code></pre></div>\n<p>키 저장 위치를 묻는 메시지가 표시되면 기본값(~/.ssh/id_rsa)을 사용하기 위해 Enter 키를 누른다. 암호 설정은 선택 사항이다.</p>\n<h3 id=\"2-ssh\">2) SSH 구성 파일 설정</h3>\n<p>SSH 구성 파일을 만들어 Gerrit 연결을 설정한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">vi</span> ~/.ssh/config\n</code></pre></div>\n<div class=\"remark-highlight\"><pre class=\"language-unknown\"><code class=\"language-unknown\">Host review.opendev.org review\n  Hostname review.opendev.org\n  Port 29418\n  User [gerrit username] \n  IdentityFile ~/.ssh/id_rsa</code></pre></div>\n<h3 id=\"3\">3) 공개키 복사</h3>\n<p>출력된 내용(ssh-rsa로 시작하는 긴 문자열)을 복사한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> ~/.ssh/id_rsa.pub\n</code></pre></div>\n<h3 id=\"4-gerrit\">4) Gerrit에 공개키 등록</h3>\n<p>복사한 공개 키 값을 필드에 저장한다.\n<img src=\"https://velog.velcdn.com/images/antraxmin/post/ffad2db6-9cf0-4477-bb65-cad62c6dcd0d/image.png\" alt=\"\"></p>\n<h3 id=\"5-ssh\">5) SSH 연결 테스트</h3>\n<p>SSH 키가 올바르게 구성되었는지 확인한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ssh</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">29418</span> your_gerrit_username@review.opendev.org\n</code></pre></div>\n<p>성공적으로 연결되면 아래와 같은 메시지가 표시된다.\n<img src=\"https://velog.velcdn.com/images/antraxmin/post/c1e7779f-2c4c-4c1e-b49b-178c648f5d78/image.png\" alt=\"\"></p>\n<h2 id=\"icla\">ICLA 동의</h2>\n<p>OpenStack에 코드를 기여하기 위해서는 Individual Contributor License Agreement(ICLA)에 동의해야 한다.</p>\n<p><img src=\"https://velog.velcdn.com/images/antraxmin/post/778ba04e-ffa2-4234-876a-2b10e8ea88ac/image.png\" alt=\"\"></p>\n<p>표시되는 ICLA 내용을 검토하고 I Agree 버튼을 클릭한다. ICLA에 동의하면 OpenStack 프로젝트에 코드를 제출할 수 있는 권한이 부여된다.</p>\n<h2 id=\"git-review\">Git-Review 설치</h2>\n<p>Git-review는 Gerrit과 함께 작업하기 위한 Git 확장 도구로, 코드 리뷰 제출 프로세스를 간소화한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\">pip3 <span class=\"token function\">install</span> git-review\n</code></pre></div>\n<p>Git-review에 Gerrit 사용자 이름을 설정한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> config <span class=\"token parameter variable\">--global</span> <span class=\"token parameter variable\">--add</span> gitreview.username <span class=\"token string\">\"gerrit_username\"</span>\n</code></pre></div>\n<p>테스트를 위해 OpenDev Sandbox 프로젝트를 클론해 보자. Sandbox는 OpenStack 기여자가 Gerrit 워크플로우를 연습할 수 있는 테스트 프로젝트이다.</p>\n<p>먼저 프로젝트 디렉토리에서 git-review를 초기화한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> review <span class=\"token parameter variable\">-s</span>\n</code></pre></div>\n<p>이 명령어는 다음 작업을 수행한다.</p>\n<ul>\n<li>Gerrit 원격 저장소 설정 추가</li>\n<li>Change-Id 커밋 훅 설정 (커밋 메시지에 자동으로 Change-Id 추가)</li>\n<li>Gerrit 서버와의 연결 테스트</li>\n</ul>\n<p>성공적으로 실행되면 출력 없이 명령이 완료된다.</p>\n<h2 id=\"\">첫 번째 커밋 테스트</h2>\n<p>실제로 변경사항을 만들고 Gerrit에 제출해 보고자 한다.</p>\n<div class=\"remark-highlight\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> test-change\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"This is a test for Gerrit workflow\"</span> <span class=\"token operator\">>></span> README.md\n\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> README.md <span class=\"token function\">git</span> commit <span class=\"token parameter variable\">-m</span> <span class=\"token string\">\"Test: Add a line to README for testing Gerrit workflow\"</span>\n</code></pre></div>\n<p>이렇게 테스트 커밋 하나를 작성하면 커밋 메시지에 자동으로 Change-Id가 추가된 것을 확인할 수 있다.</p>\n<p><img src=\"https://velog.velcdn.com/images/antraxmin/post/9e503753-5dd9-4dba-90ca-8fe9f9029835/image.png\" alt=\"\"></p>\n<p>git review 명령어를 통해 gerrit에 커밋을 제출해 보았다.</p>\n<p><img src=\"https://velog.velcdn.com/images/antraxmin/post/6ce3ba7f-fe1c-4307-a431-66a405363c96/image.png\" alt=\"\"></p>\n<p>고인물들의 작업 공간에 뉴비의 작디작은 테스트 커밋이 찍혔다.</p>\n<p><img src=\"https://velog.velcdn.com/images/antraxmin/post/e91a2756-0e87-4fb9-9df2-5792d42ac439/image.png\" alt=\"\"></p>\n<p>굳. 여기까지 해서 OpenStack 기여를 위한 준비가 모두 완료되었다. 상당히 복잡하다. 그래도 별다른 오류 없이 잘 따라가고 있는 것 같다.</p>\n","content":"\n## Gerrit이란?\nGerrit은 Git 기반의 코드 리뷰 시스템으로, OpenStack 커뮤니티에서 코드 변경사항을 검토하고 병합하는 데 사용된다. OpenStack에 코드를 기여하기 위해서는 반드시 Gerrit을 사용해야만 한다. \n\n기여 과정은 대략 아래와 같다. \n\n1. 코드 변경 작성\n2. Gerrit에 변경사항 제출\n3. 자동화된 CI 테스트 통과\n4. 커뮤니티 구성원의 코드 리뷰\n5. 필요한 경우 코드 수정\n6. 최종 승인 및 병합\n\nOpenStack에 기여하기 위해서는 Gerrit 계정과 더불어 Storyboard(이슈 트래킹 시스템)에 접근할 수 있어야 한다. 두 시스템 모두 Ubuntu One 계정을 통해 통합 관리된다. \n\n## Ubuntu One 계정 생성 \n시작하기 전에 Ubuntu One 계정이 필요하다. 이 계정은 Gerrit, Storyboard 등 OpenStack 관련 서비스에 모두 사용된다. \n![](https://velog.velcdn.com/images/antraxmin/post/a47181b7-569f-4d8d-98bd-61a8918b58a9/image.png)\n\n## Gerrit 계정 생성\nUbuntu One 계정을 생성한 후 Gerrit 계정을 설정할 수 있다. \n\n![](https://velog.velcdn.com/images/antraxmin/post/1874b818-0813-449c-a352-96f24841f62f/image.png)\n\n> Gerrit 사용자 이름은 이후 Git 구성에 필요하므로 반드시 기록해 두자. \n\n\n## SSH 키 생성 및 등록 \nGerrit과 안전하게 통신하려면 SSH 키 쌍이 필요하다. \n\n### 1) SSH 키 생성\n\n터미널을 열고 다음 명령어를 실행한다.\n\n```bash\nssh-keygen -t rsa -b 4096 -C \"이메일 주소\"\n```\n키 저장 위치를 묻는 메시지가 표시되면 기본값(~/.ssh/id_rsa)을 사용하기 위해 Enter 키를 누른다. 암호 설정은 선택 사항이다. \n\n\n### 2) SSH 구성 파일 설정\n\nSSH 구성 파일을 만들어 Gerrit 연결을 설정한다. \n\n```bash\nvi ~/.ssh/config\n```\n\n```\nHost review.opendev.org review\n  Hostname review.opendev.org\n  Port 29418\n  User [gerrit username] \n  IdentityFile ~/.ssh/id_rsa\n```\n\n### 3) 공개키 복사 \n\n출력된 내용(ssh-rsa로 시작하는 긴 문자열)을 복사한다. \n\n```bash\ncat ~/.ssh/id_rsa.pub\n```\n\n### 4) Gerrit에 공개키 등록 \n복사한 공개 키 값을 필드에 저장한다.\n![](https://velog.velcdn.com/images/antraxmin/post/ffad2db6-9cf0-4477-bb65-cad62c6dcd0d/image.png)\n\n### 5) SSH 연결 테스트 \nSSH 키가 올바르게 구성되었는지 확인한다.\n\n```bash\nssh -p 29418 your_gerrit_username@review.opendev.org\n```\n성공적으로 연결되면 아래와 같은 메시지가 표시된다. \n![](https://velog.velcdn.com/images/antraxmin/post/c1e7779f-2c4c-4c1e-b49b-178c648f5d78/image.png)\n\n\n## ICLA 동의\nOpenStack에 코드를 기여하기 위해서는 Individual Contributor License Agreement(ICLA)에 동의해야 한다. \n\n![](https://velog.velcdn.com/images/antraxmin/post/778ba04e-ffa2-4234-876a-2b10e8ea88ac/image.png)\n\n표시되는 ICLA 내용을 검토하고 I Agree 버튼을 클릭한다. ICLA에 동의하면 OpenStack 프로젝트에 코드를 제출할 수 있는 권한이 부여된다. \n\n## Git-Review 설치\nGit-review는 Gerrit과 함께 작업하기 위한 Git 확장 도구로, 코드 리뷰 제출 프로세스를 간소화한다. \n\n```bash\npip3 install git-review\n```\n\nGit-review에 Gerrit 사용자 이름을 설정한다. \n\n```bash\ngit config --global --add gitreview.username \"gerrit_username\"\n```\n\n테스트를 위해 OpenDev Sandbox 프로젝트를 클론해 보자. Sandbox는 OpenStack 기여자가 Gerrit 워크플로우를 연습할 수 있는 테스트 프로젝트이다. \n\n먼저 프로젝트 디렉토리에서 git-review를 초기화한다. \n\n```bash\ngit review -s\n```\n이 명령어는 다음 작업을 수행한다. \n\n- Gerrit 원격 저장소 설정 추가\n- Change-Id 커밋 훅 설정 (커밋 메시지에 자동으로 Change-Id 추가)\n- Gerrit 서버와의 연결 테스트\n\n성공적으로 실행되면 출력 없이 명령이 완료된다. \n\n## 첫 번째 커밋 테스트\n실제로 변경사항을 만들고 Gerrit에 제출해 보고자 한다. \n\n```bash\ngit checkout -b test-change\necho \"This is a test for Gerrit workflow\" >> README.md\n\ngit add README.md git commit -m \"Test: Add a line to README for testing Gerrit workflow\"\n```\n\n이렇게 테스트 커밋 하나를 작성하면 커밋 메시지에 자동으로 Change-Id가 추가된 것을 확인할 수 있다. \n\n![](https://velog.velcdn.com/images/antraxmin/post/9e503753-5dd9-4dba-90ca-8fe9f9029835/image.png)\n\ngit review 명령어를 통해 gerrit에 커밋을 제출해 보았다. \n\n![](https://velog.velcdn.com/images/antraxmin/post/6ce3ba7f-fe1c-4307-a431-66a405363c96/image.png)\n\n고인물들의 작업 공간에 뉴비의 작디작은 테스트 커밋이 찍혔다. \n\n![](https://velog.velcdn.com/images/antraxmin/post/e91a2756-0e87-4fb9-9df2-5792d42ac439/image.png)\n\n굳. 여기까지 해서 OpenStack 기여를 위한 준비가 모두 완료되었다. 상당히 복잡하다. 그래도 별다른 오류 없이 잘 따라가고 있는 것 같다. \n","title":"OpenStack 개발 환경 구축 - 3. Gerrit 계정 생성 및 커밋 환경 설정","subtitle":".","date":"2025-04-22","category":"OSSCA","thumbnail":"https://github.com/user-attachments/assets/0eb8b922-be58-4fb0-a068-a49d72465c6c"}},"__N_SSG":true}